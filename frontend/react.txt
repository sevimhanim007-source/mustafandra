<artifacts>
<artifact type="application/vnd.ant.react" title="Frontend - Tüm Modüller için UI Bileşenleri" id="frontend_modules">
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './components/ui/card';
import { Button } from './components/ui/button';
import { Badge } from './components/ui/badge';
import { Input } from './components/ui/input';
import { Label } from './components/ui/label';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './components/ui/select';
import { Textarea } from './components/ui/textarea';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from './components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './components/ui/tabs';
import { Alert, AlertDescription } from './components/ui/alert';
import { useToast } from './hooks/use-toast';
import { 
  FileText, Users, AlertTriangle, Shield, Settings, BarChart, 
  CheckCircle, XCircle, Clock, TrendingUp, TrendingDown, 
  Activity, Calendar, Tool, ClipboardList, Target, Info,
  AlertCircle, ChevronRight, Plus, Eye, Edit, Download
} from 'lucide-react';
const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001';
const API = ${BACKEND_URL}/api;
// ========== COMPLAINTS MODULE ==========
export const ComplaintsModule = () => {
const [complaints, setComplaints] = useState([]);
const [loading, setLoading] = useState(true);
const [showCreateDialog, setShowCreateDialog] = useState(false);
const { toast } = useToast();
useEffect(() => {
fetchComplaints();
}, []);
const fetchComplaints = async () => {
try {
const response = await axios.get(${API}/complaints);
setComplaints(response.data);
} catch (error) {
console.error('Failed to fetch complaints:', error);
} finally {
setLoading(false);
}
};
const getStatusBadge = (status) => {
const statusMap = {
'open': { label: 'Açık', color: 'bg-blue-100 text-blue-800' },
'investigating': { label: 'İnceleniyor', color: 'bg-yellow-100 text-yellow-800' },
'resolved': { label: 'Çözümlendi', color: 'bg-green-100 text-green-800' },
'closed': { label: 'Kapatıldı', color: 'bg-gray-100 text-gray-800' }
};
const config = statusMap[status] || statusMap.open;
return <Badge className={config.color}>{config.label}</Badge>;
};
const getPriorityBadge = (priority) => {
const priorityMap = {
'low': { label: 'Düşük', color: 'bg-gray-100 text-gray-800' },
'medium': { label: 'Orta', color: 'bg-blue-100 text-blue-800' },
'high': { label: 'Yüksek', color: 'bg-orange-100 text-orange-800' },
'critical': { label: 'Kritik', color: 'bg-red-100 text-red-800' }
};
const config = priorityMap[priority] || priorityMap.medium;
return <Badge className={config.color}>{config.label}</Badge>;
};
if (loading) {
return <div className="flex justify-center p-8">Yükleniyor...</div>;
}
return (
<div className="space-y-6">
<div className="flex justify-between items-center">
<h1 className="text-2xl font-bold">Müşteri Şikayetleri</h1>
<Button
onClick={() => setShowCreateDialog(true)}
className="bg-blue-600 hover:bg-blue-700"
>
<Plus className="h-4 w-4 mr-2" />
Yeni Şikayet
</Button>
</div>
  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Toplam Şikayet</p>
            <p className="text-2xl font-bold">{complaints.length}</p>
          </div>
          <ClipboardList className="h-8 w-8 text-blue-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Açık Şikayetler</p>
            <p className="text-2xl font-bold">
              {complaints.filter(c => c.status === 'open').length}
            </p>
          </div>
          <AlertCircle className="h-8 w-8 text-yellow-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">İnceleniyor</p>
            <p className="text-2xl font-bold">
              {complaints.filter(c => c.status === 'investigating').length}
            </p>
          </div>
          <Clock className="h-8 w-8 text-orange-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Çözümlendi</p>
            <p className="text-2xl font-bold">
              {complaints.filter(c => c.status === 'resolved').length}
            </p>
          </div>
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
      </CardContent>
    </Card>
  </div>

  <Card>
    <CardHeader>
      <CardTitle>Şikayet Listesi</CardTitle>
      <CardDescription>Müşteri şikayetlerini yönetin ve takip edin</CardDescription>
    </CardHeader>
    <CardContent>
      <div className="space-y-4">
        {complaints.map((complaint) => (
          <div key={complaint.id} className="border rounded-lg p-4 hover:bg-gray-50">
            <div className="flex justify-between items-start">
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-2">
                  <span className="font-semibold">#{complaint.complaint_no}</span>
                  {getStatusBadge(complaint.status)}
                  {getPriorityBadge(complaint.priority)}
                </div>
                <p className="text-sm text-gray-600 mb-1">
                  <span className="font-medium">Müşteri:</span> {complaint.customer_name}
                </p>
                <p className="text-sm text-gray-600 mb-2">
                  <span className="font-medium">Tip:</span> {complaint.complaint_type}
                </p>
                <p className="text-sm text-gray-700">{complaint.description}</p>
                <p className="text-xs text-gray-500 mt-2">
                  {new Date(complaint.complaint_date).toLocaleString('tr-TR')}
                </p>
              </div>
              <div className="flex gap-2">
                <Button variant="ghost" size="sm">
                  <Eye className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="sm">
                  <Edit className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </CardContent>
  </Card>
</div>
);
};
// ========== RISK ASSESSMENT MODULE ==========
export const RiskAssessmentModule = () => {
const [risks, setRisks] = useState([]);
const [loading, setLoading] = useState(true);
const [riskMatrix, setRiskMatrix] = useState(null);
const { toast } = useToast();
useEffect(() => {
fetchRisks();
fetchRiskMatrix();
}, []);
const fetchRisks = async () => {
try {
const response = await axios.get(${API}/risk-assessments);
setRisks(response.data);
} catch (error) {
console.error('Failed to fetch risks:', error);
} finally {
setLoading(false);
}
};
const fetchRiskMatrix = async () => {
try {
const response = await axios.get(${API}/reports/risk-matrix);
setRiskMatrix(response.data);
} catch (error) {
console.error('Failed to fetch risk matrix:', error);
}
};
const getRiskLevelBadge = (level) => {
const levelMap = {
'low': { label: 'Düşük', color: 'bg-green-100 text-green-800' },
'medium': { label: 'Orta', color: 'bg-yellow-100 text-yellow-800' },
'high': { label: 'Yüksek', color: 'bg-orange-100 text-orange-800' },
'critical': { label: 'Kritik', color: 'bg-red-100 text-red-800' }
};
const config = levelMap[level] || levelMap.medium;
return <Badge className={config.color}>{config.label}</Badge>;
};
const getRiskTrendIcon = (trend) => {
if (trend === 'increasing') return <TrendingUp className="h-4 w-4 text-red-500" />;
if (trend === 'decreasing') return <TrendingDown className="h-4 w-4 text-green-500" />;
return <Activity className="h-4 w-4 text-gray-500" />;
};
const RiskMatrix = ({ matrix }) => {
if (!matrix) return null;
const getCellColor = (likelihood, impact) => {
  const score = likelihood * impact;
  if (score <= 4) return 'bg-green-200';
  if (score <= 9) return 'bg-yellow-200';
  if (score <= 15) return 'bg-orange-200';
  return 'bg-red-200';
};

return (
  <div className="overflow-x-auto">
    <table className="min-w-full border">
      <thead>
        <tr>
          <th className="border p-2">Olasılık / Etki</th>
          {[1, 2, 3, 4, 5].map(i => (
            <th key={i} className="border p-2">Etki {i}</th>
          ))}
        </tr>
      </thead>
      <tbody>
        {[5, 4, 3, 2, 1].map(likelihood => (
          <tr key={likelihood}>
            <td className="border p-2 font-medium">Olasılık {likelihood}</td>
            {[1, 2, 3, 4, 5].map(impact => (
              <td 
                key={impact} 
                className={`border p-2 text-center ${getCellColor(likelihood, impact)}`}
              >
                {matrix.matrix?.[likelihood]?.[impact]?.count || 0}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>
);
};
if (loading) {
return <div className="flex justify-center p-8">Yükleniyor...</div>;
}
return (
<div className="space-y-6">
<div className="flex justify-between items-center">
<h1 className="text-2xl font-bold">Risk Değerlendirme</h1>
<Button className="bg-blue-600 hover:bg-blue-700">
<Plus className="h-4 w-4 mr-2" />
Yeni Risk
</Button>
</div>
  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Toplam Risk</p>
            <p className="text-2xl font-bold">{risks.length}</p>
          </div>
          <Shield className="h-8 w-8 text-blue-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Kritik Riskler</p>
            <p className="text-2xl font-bold">
              {risks.filter(r => r.risk_level === 'critical').length}
            </p>
          </div>
          <AlertTriangle className="h-8 w-8 text-red-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Yüksek Riskler</p>
            <p className="text-2xl font-bold">
              {risks.filter(r => r.risk_level === 'high').length}
            </p>
          </div>
          <AlertCircle className="h-8 w-8 text-orange-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Azaltılmış</p>
            <p className="text-2xl font-bold">
              {risks.filter(r => r.mitigation_strategy).length}
            </p>
          </div>
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
      </CardContent>
    </Card>
  </div>

  <Tabs defaultValue="list">
    <TabsList>
      <TabsTrigger value="list">Risk Listesi</TabsTrigger>
      <TabsTrigger value="matrix">Risk Matrisi</TabsTrigger>
    </TabsList>

    <TabsContent value="list">
      <Card>
        <CardHeader>
          <CardTitle>Risk Listesi</CardTitle>
          <CardDescription>Tanımlanan tüm riskler ve değerlendirmeleri</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {risks.map((risk) => (
              <div key={risk.id} className="border rounded-lg p-4 hover:bg-gray-50">
                <div className="flex justify-between items-start">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <span className="font-semibold">#{risk.risk_no}</span>
                      {getRiskLevelBadge(risk.risk_level)}
                      {getRiskTrendIcon(risk.risk_trend)}
                      <span className="text-sm text-gray-600">
                        Skor: {risk.risk_score}
                      </span>
                    </div>
                    <h3 className="font-medium mb-1">{risk.title}</h3>
                    <p className="text-sm text-gray-600 mb-2">
                      <span className="font-medium">Kategori:</span> {risk.risk_category} | 
                      <span className="font-medium"> Departman:</span> {risk.department}
                    </p>
                    <p className="text-sm text-gray-700 mb-2">{risk.risk_description}</p>
                    <div className="flex gap-4 text-xs text-gray-500">
                      <span>Olasılık: {risk.threat_likelihood}/5</span>
                      <span>Etki: {risk.impact_severity}/5</span>
                      {risk.residual_risk_score && (
                        <span>Artık Risk: {risk.residual_risk_score}</span>
                      )}
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <Button variant="ghost" size="sm">
                      <Eye className="h-4 w-4" />
                    </Button>
                    <Button variant="ghost" size="sm">
                      <Edit className="h-4 w-4" />
                    </Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </TabsContent>

    <TabsContent value="matrix">
      <Card>
        <CardHeader>
          <CardTitle>Risk Matrisi</CardTitle>
          <CardDescription>Olasılık ve etki bazında risk dağılımı</CardDescription>
        </CardHeader>
        <CardContent>
          <RiskMatrix matrix={riskMatrix} />
          <div className="mt-4 flex gap-4 text-sm">
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-green-200 border"></div>
              <span>Düşük Risk (1-4)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-yellow-200 border"></div>
              <span>Orta Risk (5-9)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-orange-200 border"></div>
              <span>Yüksek Risk (10-15)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-red-200 border"></div>
              <span>Kritik Risk (16-25)</span>
            </div>
          </div>
        </CardContent>
      </Card>
    </TabsContent>
  </Tabs>
</div>
);
};
// ========== AUDIT MODULE ==========
export const AuditModule = () => {
const [audits, setAudits] = useState([]);
const [loading, setLoading] = useState(true);
useEffect(() => {
fetchAudits();
}, []);
const fetchAudits = async () => {
try {
const response = await axios.get(${API}/audits);
setAudits(response.data);
} catch (error) {
console.error('Failed to fetch audits:', error);
} finally {
setLoading(false);
}
};
const getStatusBadge = (status) => {
const statusMap = {
'planned': { label: 'Planlandı', color: 'bg-blue-100 text-blue-800' },
'in_progress': { label: 'Devam Ediyor', color: 'bg-yellow-100 text-yellow-800' },
'completed': { label: 'Tamamlandı', color: 'bg-green-100 text-green-800' },
'cancelled': { label: 'İptal', color: 'bg-gray-100 text-gray-800' }
};
const config = statusMap[status] || statusMap.planned;
return <Badge className={config.color}>{config.label}</Badge>;
};
if (loading) {
return <div className="flex justify-center p-8">Yükleniyor...</div>;
}
return (
<div className="space-y-6">
<div className="flex justify-between items-center">
<h1 className="text-2xl font-bold">Denetim Yönetimi</h1>
<Button className="bg-blue-600 hover:bg-blue-700">
<Plus className="h-4 w-4 mr-2" />
Yeni Denetim
</Button>
</div>
  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Toplam Denetim</p>
            <p className="text-2xl font-bold">{audits.length}</p>
          </div>
          <ClipboardList className="h-8 w-8 text-blue-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Planlanan</p>
            <p className="text-2xl font-bold">
              {audits.filter(a => a.status === 'planned').length}
            </p>
          </div>
          <Calendar className="h-8 w-8 text-yellow-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Devam Eden</p>
            <p className="text-2xl font-bold">
              {audits.filter(a => a.status === 'in_progress').length}
            </p>
          </div>
          <Clock className="h-8 w-8 text-orange-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Tamamlanan</p>
            <p className="text-2xl font-bold">
              {audits.filter(a => a.status === 'completed').length}
            </p>
          </div>
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
      </CardContent>
    </Card>
  </div>

  <Card>
    <CardHeader>
      <CardTitle>Denetim Listesi</CardTitle>
      <CardDescription>Planlanan ve tamamlanan denetimler</CardDescription>
    </CardHeader>
    <CardContent>
      <div className="space-y-4">
        {audits.map((audit) => (
          <div key={audit.id} className="border rounded-lg p-4 hover:bg-gray-50">
            <div className="flex justify-between items-start">
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-2">
                  <span className="font-semibold">#{audit.audit_no}</span>
                  {getStatusBadge(audit.status)}
                  <Badge variant="outline">{audit.audit_type}</Badge>
                </div>
                <div className="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <p className="text-gray-600">
                      <span className="font-medium">Denetim Alanı:</span> {audit.audited_area}
                    </p>
                    <p className="text-gray-600">
                      <span className="font-medium">Departman:</span> {audit.department}
                    </p>
                    <p className="text-gray-600">
                      <span className="font-medium">Baş Denetçi:</span> {audit.lead_auditor}
                    </p>
                  </div>
                  <div>
                    <p className="text-gray-600">
                      <span className="font-medium">Kriter:</span> {audit.criteria}
                    </p>
                    <p className="text-gray-600">
                      <span className="font-medium">Tarih:</span> {new Date(audit.audit_date).toLocaleDateString('tr-TR')}
                    </p>
                    {audit.findings?.length > 0 && (
                      <p className="text-gray-600">
                        <span className="font-medium">Bulgular:</span> {audit.findings.length}
                      </p>
                    )}
                  </div>
                </div>
              </div>
              <div className="flex gap-2">
                <Button variant="ghost" size="sm">
                  <Eye className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="sm">
                  <Edit className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </CardContent>
  </Card>
</div>
);
};
// ========== EQUIPMENT MODULE ==========
export const EquipmentModule = () => {
const [equipment, setEquipment] = useState([]);
const [workOrders, setWorkOrders] = useState([]);
const [loading, setLoading] = useState(true);
useEffect(() => {
fetchEquipment();
fetchWorkOrders();
}, []);
const fetchEquipment = async () => {
try {
const response = await axios.get(${API}/equipment);
setEquipment(response.data);
} catch (error) {
console.error('Failed to fetch equipment:', error);
} finally {
setLoading(false);
}
};
const fetchWorkOrders = async () => {
try {
const response = await axios.get(${API}/work-orders?status=open);
setWorkOrders(response.data);
} catch (error) {
console.error('Failed to fetch work orders:', error);
}
};
const getStatusBadge = (status) => {
const statusMap = {
'active': { label: 'Aktif', color: 'bg-green-100 text-green-800' },
'inactive': { label: 'Pasif', color: 'bg-gray-100 text-gray-800' },
'maintenance': { label: 'Bakımda', color: 'bg-yellow-100 text-yellow-800' },
'calibration': { label: 'Kalibrasyonda', color: 'bg-blue-100 text-blue-800' },
'retired': { label: 'Emekli', color: 'bg-red-100 text-red-800' }
};
const config = statusMap[status] || statusMap.active;
return <Badge className={config.color}>{config.label}</Badge>;
};
const getDaysUntilCalibration = (date) => {
if (!date) return null;
const days = Math.ceil((new Date(date) - new Date()) / (1000 * 60 * 60 * 24));
if (days < 0) return <span className="text-red-600 font-semibold">Gecikmiş</span>;
if (days < 30) return <span className="text-orange-600 font-semibold">{days} gün</span>;
return <span className="text-green-600">{days} gün</span>;
};
if (loading) {
return <div className="flex justify-center p-8">Yükleniyor...</div>;
}
return (
<div className="space-y-6">
<div className="flex justify-between items-center">
<h1 className="text-2xl font-bold">Cihaz Yönetimi</h1>
<Button className="bg-blue-600 hover:bg-blue-700">
<Plus className="h-4 w-4 mr-2" />
Yeni Cihaz
</Button>
</div>
  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Toplam Cihaz</p>
            <p className="text-2xl font-bold">{equipment.length}</p>
          </div>
          <Tool className="h-8 w-8 text-blue-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Aktif Cihazlar</p>
            <p className="text-2xl font-bold">
              {equipment.filter(e => e.status === 'active').length}
            </p>
          </div>
          <Activity className="h-8 w-8 text-green-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Kalibrasyon Bekleyen</p>
            <p className="text-2xl font-bold">
              {equipment.filter(e => e.calibration_required && e.next_calibration_date).length}
            </p>
          </div>
          <Clock className="h-8 w-8 text-orange-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">İş Emirleri</p>
            <p className="text-2xl font-bold">{workOrders.length}</p>
          </div>
          <ClipboardList className="h-8 w-8 text-purple-500" />
        </div>
      </CardContent>
    </Card>
  </div>

  <Tabs defaultValue="equipment">
    <TabsList>
      <TabsTrigger value="equipment">Cihaz Listesi</TabsTrigger>
      <TabsTrigger value="calibration">Kalibrasyon Takvimi</TabsTrigger>
      <TabsTrigger value="workorders">İş Emirleri</TabsTrigger>
    </TabsList>

    <TabsContent value="equipment">
      <Card>
        <CardHeader>
          <CardTitle>Cihaz Listesi</CardTitle>
          <CardDescription>Tüm cihazlar ve durumları</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {equipment.map((eq) => (
              <div key={eq.id} className="border rounded-lg p-4 hover:bg-gray-50">
                <div className="flex justify-between items-start">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <span className="font-semibold">#{eq.equipment_no}</span>
                      {getStatusBadge(eq.status)}
                    </div>
                    <h3 className="font-medium mb-1">{eq.name}</h3>
                    <div className="grid grid-cols-2 gap-4 text-sm">
                      <div>
                        <p className="text-gray-600">
                          <span className="font-medium">Tip:</span> {eq.equipment_type}
                        </p>
                        <p className="text-gray-600">
                          <span className="font-medium">Üretici:</span> {eq.manufacturer}
                        </p>
                        <p className="text-gray-600">
                          <span className="font-medium">Model:</span> {eq.model}
                        </p>
                      </div>
                      <div>
                        <p className="text-gray-600">
                          <span className="font-medium">Seri No:</span> {eq.serial_number}
                        </p>
                        <p className="text-gray-600">
                          <span className="font-medium">Lokasyon:</span> {eq.location}
                        </p>
                        {eq.calibration_required && (
                          <p className="text-gray-600">
                            <span className="font-medium">Sonraki Kalibrasyon:</span> {getDaysUntilCalibration(eq.next_calibration_date)}
                          </p>
                        )}
                      </div>
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <Button variant="ghost" size="sm">
                      <Eye className="h-4 w-4" />
                    </Button>
                    <Button variant="ghost" size="sm">
                      <Edit className="h-4 w-4" />
                    </Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </TabsContent>

    <TabsContent value="calibration">
      <Card>
        <CardHeader>
          <CardTitle>Kalibrasyon Takvimi</CardTitle>
          <CardDescription>Yaklaşan kalibrasyon tarihleri</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {equipment
              .filter(eq => eq.calibration_required && eq.next_calibration_date)
              .sort((a, b) => new Date(a.next_calibration_date) - new Date(b.next_calibration_date))
              .map((eq) => (
                <div key={eq.id} className="border-l-4 border-blue-500 pl-4 py-2">
                  <div className="flex justify-between items-center">
                    <div>
                      <p className="font-medium">{eq.name}</p>
                      <p className="text-sm text-gray-600">{eq.equipment_no} - {eq.location}</p>
                    </div>
                    <div className="text-right">
                      <p className="text-sm font-medium">
                        {new Date(eq.next_calibration_date).toLocaleDateString('tr-TR')}
                      </p>
                      <p className="text-sm">{getDaysUntilCalibration(eq.next_calibration_date)}</p>
                    </div>
                  </div>
                </div>
              ))}
          </div>
        </CardContent>
      </Card>
    </TabsContent>

    <TabsContent value="workorders">
      <Card>
        <CardHeader>
          <CardTitle>İş Emirleri</CardTitle>
          <CardDescription>Açık iş emirleri ve görevler</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {workOrders.map((wo) => (
              <div key={wo.id} className="border rounded-lg p-4 hover:bg-gray-50">
                <div className="flex justify-between items-start">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <span className="font-semibold">#{wo.work_order_no}</span>
                      <Badge variant="outline">{wo.work_type}</Badge>
                      <Badge className="bg-yellow-100 text-yellow-800">{wo.priority}</Badge>
                    </div>
                    <p className="text-sm text-gray-600 mb-1">
                      <span className="font-medium">Planlanan:</span> {new Date(wo.scheduled_date).toLocaleDateString('tr-TR')}
                    </p>
                    <p className="text-sm text-gray-600">
                      <span className="font-medium">Atanan:</span> {wo.assigned_to}
                    </p>
                  </div>
                  <Button size="sm" variant="outline">
                    Tamamla
                  </Button>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </TabsContent>
  </Tabs>
</div>
);
};
// ========== CAPA MODULE ==========
export const CapaModule = () => {
const [capas, setCapas] = useState([]);
const [loading, setLoading] = useState(true);
useEffect(() => {
fetchCapas();
}, []);
const fetchCapas = async () => {
try {
const response = await axios.get(${API}/capas);
setCapas(response.data);
} catch (error) {
console.error('Failed to fetch CAPAs:', error);
} finally {
setLoading(false);
}
};
const getStatusBadge = (status) => {
const statusMap = {
'open': { label: 'Açık', color: 'bg-blue-100 text-blue-800' },
'investigating': { label: 'Araştırılıyor', color: 'bg-yellow-100 text-yellow-800' },
'implementing': { label: 'Uygulanıyor', color: 'bg-orange-100 text-orange-800' },
'closed': { label: 'Kapalı', color: 'bg-green-100 text-green-800' }
};
const config = statusMap[status] || statusMap.open;
return <Badge className={config.color}>{config.label}</Badge>;
};
if (loading) {
return <div className="flex justify-center p-8">Yükleniyor...</div>;
}
return (
<div className="space-y-6">
<div className="flex justify-between items-center">
<h1 className="text-2xl font-bold">DÖF/CAPA Yönetimi</h1>
<Button className="bg-blue-600 hover:bg-blue-700">
<Plus className="h-4 w-4 mr-2" />
Yeni DÖF/CAPA
</Button>
</div>
  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Toplam DÖF</p>
            <p className="text-2xl font-bold">{capas.length}</p>
          </div>
          <Target className="h-8 w-8 text-blue-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Açık</p>
            <p className="text-2xl font-bold">
              {capas.filter(c => c.status === 'open').length}
            </p>
          </div>
          <AlertCircle className="h-8 w-8 text-yellow-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Uygulanıyor</p>
            <p className="text-2xl font-bold">
              {capas.filter(c => c.status === 'implementing').length}
            </p>
          </div>
          <Clock className="h-8 w-8 text-orange-500" />
        </div>
      </CardContent>
    </Card>
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">Kapalı</p>
            <p className="text-2xl font-bold">
              {capas.filter(c => c.status === 'closed').length}
            </p>
          </div>
          <CheckCircle className="h-8 w-8 text-green-500" />
        </div>
      </CardContent>
    </Card>
  </div>

  <Card>
    <CardHeader>
      <CardTitle>DÖF/CAPA Listesi</CardTitle>
      <CardDescription>Düzeltici ve önleyici faaliyetler</CardDescription>
    </CardHeader>
    <CardContent>
      <div className="space-y-4">
        {capas.map((capa) => (
          <div key={capa.id} className="border rounded-lg p-4 hover:bg-gray-50">
            <div className="flex justify-between items-start">
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-2">
                  <span className="font-semibold">#{capa.capa_no}</span>
                  {getStatusBadge(capa.status)}
                  <Badge variant="outline">{capa.source}</Badge>
                </div>
                <h3 className="font-medium mb-1">{capa.title}</h3>
                <p className="text-sm text-gray-700 mb-2">{capa.nonconformity_description}</p>
                <div className="flex gap-4 text-sm text-gray-600">
                  <span>Departman: {capa.department}</span>
                  <span>Ekip Lideri: {capa.team_leader}</span>
                  {capa.target_date && (
                    <span>Hedef: {new Date(capa.target_date).toLocaleDateString('tr-TR')}</span>
                  )}
                </div>
              </div>
              <div className="flex gap-2">
                <Button variant="ghost" size="sm">
                  <Eye className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="sm">
                  <Edit className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </CardContent>
  </Card>
</div>
);
};
export default function QDMSModules() {
return (
<div className="min-h-screen bg-gray-50">
<div className="p-8">
<h1 className="text-3xl font-bold mb-8">QDMS Modülleri</h1>
<p className="text-gray-600 mb-8">
Tüm modüller entegre çalışır. Her modül diğerleriyle bağlantılı DÖF/CAPA kaydı oluşturabilir.
</p>
</div>
</div>
);
}
</artifact>
</artifacts>